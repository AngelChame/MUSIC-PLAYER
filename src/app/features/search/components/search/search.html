<div class="search-results-container">

  @if (isLoading) {
    <div class="loading-state">
      <p>Buscando "{{ searchQuery }}"...</p>
    </div>
  }

  @if (!isLoading) {
    <!-- Tracks -->
    @if (tracks.length > 0) {
      <section class="results-section">
        <h2>üéµ Canciones</h2>
        <div class="results-grid">
          @for (track of tracks; track track.id) {
            <div class="result-card track-card">
              @if (track.album.images.length > 0) {
                <img
                  [src]="track.album.images[0].url"
                  [alt]="track.name"
                  class="result-image">
              }
              <div class="result-info">
                <p class="result-title">{{ track.name }}</p>
                <p class="result-subtitle">{{ getArtistNames(track.artists) }}</p>
                <p class="result-meta">{{ formatDuration(track.duration_ms) }}</p>
              </div>
            </div>
          }
        </div>
      </section>
    }

    <!-- Albums -->
    @if (albums.length > 0) {
      <section class="results-section">
        <h2>üíø √Ålbumes</h2>
        <div class="results-grid">
          @for (album of albums; track album.id) {
            <div class="result-card album-card">
              @if (album.images.length > 0) {
                <img
                  [src]="album.images[0].url"
                  [alt]="album.name"
                  class="result-image">
              }
              <div class="result-info">
                <p class="result-title">{{ album.name }}</p>
                <p class="result-subtitle">{{ getArtistNames(album.artists) }}</p>
                <p class="result-meta">{{ album.release_date.split('-')[0] }} ‚Ä¢ {{ album.total_tracks }} canciones</p>
              </div>
            </div>
          }
        </div>
      </section>
    }

    <!-- Artists -->
    @if (artists.length > 0) {
      <section class="results-section">
        <h2>üé§ Artistas</h2>
        <div class="results-grid">
          @for (artist of artists; track artist.id) {
            <div class="result-card artist-card">
              @if (artist.images && artist.images.length > 0) {
                <img
                  [src]="artist.images[0].url"
                  [alt]="artist.name"
                  class="result-image artist-image">
              } @else {
                <div class="result-image artist-placeholder">
                  <i class="fa-solid fa-user"></i>
                </div>
              }
              <div class="result-info">
                <p class="result-title">{{ artist.name }}</p>
                @if (artist.followers) {
                  <p class="result-subtitle">{{ artist.followers.total.toLocaleString() }} seguidores</p>
                }
              </div>
            </div>
          }
        </div>
      </section>
    }

    @if (tracks.length === 0 && albums.length === 0 && artists.length === 0 && searchQuery) {
      <div class="no-results">
        ‚ùå
        <p>No se encontraron resultados para "{{ searchQuery }}"</p>
      </div>
    }
  }

</div>
